// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum UserType{
  MASTER
  DEALER
  ADMIN
  USER
}

model User {
  user_id          String      @id @unique @default(uuid())
  login            String
  password         String
  userType         UserType

  farms          Farm[]

  @@map("users")
}

model Farm {
  farm_id    String      @id @unique @default(uuid())
  farm_name  String      @unique  
  farm_city  String
  farm_lat   Float 
  farm_lng   Float
  owner       User?          @relation(fields: [owner_id], references: [user_id], onDelete: Cascade)
  owner_id    String        
  created_by  String
  updated_by  String?

  admins            String[]  @default([]) 
  dealers           String[]  @default([]) 
  users             String[]  @default([]) 
  @@map("farms")    
}

model Authorize {
  authorize_id  String   @id @unique @default(uuid())
  created_by    String
  farm_id       String?
  pivot_id      String?

  @@map("authorize")
}